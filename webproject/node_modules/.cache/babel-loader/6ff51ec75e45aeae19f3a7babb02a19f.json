{"remainingRequest":"E:\\ideas-test\\webproject\\node_modules\\babel-loader\\lib\\index.js!E:\\ideas-test\\webproject\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\ideas-test\\webproject\\src\\utils\\request.js","dependencies":[{"path":"E:\\ideas-test\\webproject\\src\\utils\\request.js","mtime":1655714238602},{"path":"E:\\ideas-test\\webproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655196103443},{"path":"E:\\ideas-test\\webproject\\node_modules\\babel-loader\\lib\\index.js","mtime":1655196104199},{"path":"E:\\ideas-test\\webproject\\node_modules\\eslint-loader\\index.js","mtime":1655196103780}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgbm90aWZpY2F0aW9uIGZyb20gJ2FudC1kZXNpZ24tdnVlL2VzL25vdGlmaWNhdGlvbic7CmltcG9ydCB7IFZ1ZUF4aW9zIH0gZnJvbSAnLi9heGlvcyc7CmltcG9ydCB7IEFDQ0VTU19UT0tFTiB9IGZyb20gJ0Avc3RvcmUvbXV0YXRpb24tdHlwZXMnOwpheGlvcy5kZWZhdWx0cy53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOyAvLyDliJvlu7ogYXhpb3Mg5a6e5L6LCgp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfQkFTRV9VUkwsCiAgLy8gYXBpIGJhc2VfdXJsCiAgdGltZW91dDogNjAwMCAvLyDor7fmsYLotoXml7bml7bpl7QKCn0pOwoKdmFyIGVyciA9IGZ1bmN0aW9uIGVycihlcnJvcikgewogIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgdmFyIGRhdGEgPSBlcnJvci5yZXNwb25zZS5kYXRhOwogICAgdmFyIHRva2VuID0gVnVlLmxzLmdldChBQ0NFU1NfVE9LRU4pOwoKICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMykgewogICAgICBub3RpZmljYXRpb24uZXJyb3IoewogICAgICAgIG1lc3NhZ2U6ICdGb3JiaWRkZW4nLAogICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLm1lc3NhZ2UKICAgICAgfSk7CiAgICB9CgogICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxICYmICEoZGF0YS5yZXN1bHQgJiYgZGF0YS5yZXN1bHQuaXNMb2dpbikpIHsKICAgICAgbm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICBtZXNzYWdlOiAnVW5hdXRob3JpemVkJywKICAgICAgICBkZXNjcmlwdGlvbjogJ0F1dGhvcml6YXRpb24gdmVyaWZpY2F0aW9uIGZhaWxlZCcKICAgICAgfSk7CgogICAgICBpZiAodG9rZW4pIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnTG9nb3V0JykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgfSwgMTUwMCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn07IC8vIHJlcXVlc3QgaW50ZXJjZXB0b3IKCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgdmFyIHRva2VuID0gVnVlLmxzLmdldChBQ0NFU1NfVE9LRU4pOwoKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzWydBY2Nlc3MtVG9rZW4nXSA9IHRva2VuOyAvLyDorqnmr4/kuKror7fmsYLmkLrluKboh6rlrprkuYkgdG9rZW4g6K+35qC55o2u5a6e6ZmF5oOF5Ya16Ieq6KGM5L+u5pS5CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBlcnIpOyAvLyByZXNwb25zZSBpbnRlcmNlcHRvcgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHJldHVybiByZXNwb25zZS5kYXRhOwp9LCBlcnIpOwp2YXIgaW5zdGFsbGVyID0gewogIHZtOiB7fSwKICBpbnN0YWxsOiBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSkgewogICAgVnVlLnVzZShWdWVBeGlvcywgc2VydmljZSk7CiAgfQp9OwpleHBvcnQgeyBpbnN0YWxsZXIgYXMgVnVlQXhpb3MsIHNlcnZpY2UgYXMgYXhpb3MgfTs="},{"version":3,"sources":["E:/ideas-test/webproject/src/utils/request.js"],"names":["Vue","axios","store","notification","VueAxios","ACCESS_TOKEN","defaults","withCredentials","service","create","baseURL","process","env","VUE_APP_API_BASE_URL","timeout","err","error","response","data","token","ls","get","status","message","description","result","isLogin","dispatch","then","setTimeout","window","location","reload","Promise","reject","interceptors","request","use","config","headers","installer","vm","install"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,SAASC,QAAT,QAAyB,SAAzB;AACA,SAASC,YAAT,QAA6B,wBAA7B;AAEAJ,KAAK,CAACK,QAAN,CAAeC,eAAf,GAAiC,IAAjC,C,CACA;;AACA,IAAMC,OAAO,GAAGP,KAAK,CAACQ,MAAN,CAAa;AACzBC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,oBADI;AACkB;AAC3CC,EAAAA,OAAO,EAAE,IAFgB,CAEX;;AAFW,CAAb,CAAhB;;AAKA,IAAMC,GAAG,GAAG,SAANA,GAAM,CAAAC,KAAK,EAAI;AACjB,MAAIA,KAAK,CAACC,QAAV,EAAoB;AAChB,QAAMC,IAAI,GAAGF,KAAK,CAACC,QAAN,CAAeC,IAA5B;AACA,QAAMC,KAAK,GAAGnB,GAAG,CAACoB,EAAJ,CAAOC,GAAP,CAAWhB,YAAX,CAAd;;AACA,QAAIW,KAAK,CAACC,QAAN,CAAeK,MAAf,KAA0B,GAA9B,EAAmC;AAC/BnB,MAAAA,YAAY,CAACa,KAAb,CAAmB;AACfO,QAAAA,OAAO,EAAE,WADM;AAEfC,QAAAA,WAAW,EAAEN,IAAI,CAACK;AAFH,OAAnB;AAIH;;AACD,QAAIP,KAAK,CAACC,QAAN,CAAeK,MAAf,KAA0B,GAA1B,IAAiC,EAAEJ,IAAI,CAACO,MAAL,IAAeP,IAAI,CAACO,MAAL,CAAYC,OAA7B,CAArC,EAA4E;AACxEvB,MAAAA,YAAY,CAACa,KAAb,CAAmB;AACfO,QAAAA,OAAO,EAAE,cADM;AAEfC,QAAAA,WAAW,EAAE;AAFE,OAAnB;;AAIA,UAAIL,KAAJ,EAAW;AACPjB,QAAAA,KAAK,CAACyB,QAAN,CAAe,QAAf,EAAyBC,IAAzB,CAA8B,YAAM;AAChCC,UAAAA,UAAU,CAAC,YAAM;AACbC,YAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,WAFS,EAEP,IAFO,CAAV;AAGH,SAJD;AAKH;AACJ;AACJ;;AACD,SAAOC,OAAO,CAACC,MAAR,CAAelB,KAAf,CAAP;AACH,CAzBD,C,CA2BA;;;AACAR,OAAO,CAAC2B,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAAAC,MAAM,EAAI;AACvC,MAAMnB,KAAK,GAAGnB,GAAG,CAACoB,EAAJ,CAAOC,GAAP,CAAWhB,YAAX,CAAd;;AACA,MAAIc,KAAJ,EAAW;AACPmB,IAAAA,MAAM,CAACC,OAAP,CAAe,cAAf,IAAiCpB,KAAjC,CADO,CACgC;AAC1C;;AACD,SAAOmB,MAAP;AACH,CAND,EAMGvB,GANH,E,CAQA;;AACAP,OAAO,CAAC2B,YAAR,CAAqBlB,QAArB,CAA8BoB,GAA9B,CAAkC,UAAApB,QAAQ,EAAI;AAC1C,SAAOA,QAAQ,CAACC,IAAhB;AACH,CAFD,EAEGH,GAFH;AAIA,IAAMyB,SAAS,GAAG;AACdC,EAAAA,EAAE,EAAE,EADU;AAEdC,EAAAA,OAFc,mBAEN1C,GAFM,EAED;AACTA,IAAAA,GAAG,CAACqC,GAAJ,CAAQjC,QAAR,EAAkBI,OAAlB;AACH;AAJa,CAAlB;AAOA,SAASgC,SAAS,IAAIpC,QAAtB,EAAgCI,OAAO,IAAIP,KAA3C","sourcesContent":["import Vue from 'vue'\nimport axios from 'axios'\nimport store from '@/store'\nimport notification from 'ant-design-vue/es/notification'\nimport { VueAxios } from './axios'\nimport { ACCESS_TOKEN } from '@/store/mutation-types'\n\naxios.defaults.withCredentials = true\n// 创建 axios 实例\nconst service = axios.create({\n    baseURL: process.env.VUE_APP_API_BASE_URL, // api base_url\n    timeout: 6000 // 请求超时时间\n})\n\nconst err = error => {\n    if (error.response) {\n        const data = error.response.data\n        const token = Vue.ls.get(ACCESS_TOKEN)\n        if (error.response.status === 403) {\n            notification.error({\n                message: 'Forbidden',\n                description: data.message\n            })\n        }\n        if (error.response.status === 401 && !(data.result && data.result.isLogin)) {\n            notification.error({\n                message: 'Unauthorized',\n                description: 'Authorization verification failed'\n            })\n            if (token) {\n                store.dispatch('Logout').then(() => {\n                    setTimeout(() => {\n                        window.location.reload()\n                    }, 1500)\n                })\n            }\n        }\n    }\n    return Promise.reject(error)\n}\n\n// request interceptor\nservice.interceptors.request.use(config => {\n    const token = Vue.ls.get(ACCESS_TOKEN)\n    if (token) {\n        config.headers['Access-Token'] = token // 让每个请求携带自定义 token 请根据实际情况自行修改\n    }\n    return config\n}, err)\n\n// response interceptor\nservice.interceptors.response.use(response => {\n    return response.data\n}, err)\n\nconst installer = {\n    vm: {},\n    install(Vue) {\n        Vue.use(VueAxios, service)\n    }\n}\n\nexport { installer as VueAxios, service as axios }\n"]}]}