{"remainingRequest":"E:\\ideas-test\\webproject\\node_modules\\babel-loader\\lib\\index.js!E:\\ideas-test\\webproject\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\ideas-test\\webproject\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ideas-test\\webproject\\src\\views\\owner\\information-dialog\\importexcel.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\ideas-test\\webproject\\src\\views\\owner\\information-dialog\\importexcel.vue","mtime":1657098443926},{"path":"E:\\ideas-test\\webproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655196103443},{"path":"E:\\ideas-test\\webproject\\node_modules\\babel-loader\\lib\\index.js","mtime":1655196104199},{"path":"E:\\ideas-test\\webproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655196103443},{"path":"E:\\ideas-test\\webproject\\node_modules\\vue-loader\\lib\\index.js","mtime":1655196105141}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJFOi9pZGVhcy10ZXN0L3dlYnByb2plY3Qvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCByZXF3ZXN0IGZyb20gJ3JlcXdlc3QnOyAvLyBhamF45LiK5Lyg5o+S5Lu2CgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHZpc2libGVPYmo6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaW1wb3J0ZXhjZWx2aXNpYmxlOiBmYWxzZQogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBjb21wYW55TGlzdDogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGFiZWxDb2w6IHsKICAgICAgICBsZzogewogICAgICAgICAgc3BhbjogNgogICAgICAgIH0sCiAgICAgICAgc206IHsKICAgICAgICAgIHNwYW46IDYKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHdyYXBwZXJDb2w6IHsKICAgICAgICBsZzogewogICAgICAgICAgc3BhbjogMTgKICAgICAgICB9LAogICAgICAgIHNtOiB7CiAgICAgICAgICBzcGFuOiAxOAogICAgICAgIH0KICAgICAgfSwKICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICB1cGxvYWRpbmc6IGZhbHNlLAogICAgICBjb21wYW55OiAnJywKICAgICAgY29tcGFueV9pZDogJycKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDYW5jZWw6IGZ1bmN0aW9uIGhhbmRsZUNhbmNlbChlKSB7CiAgICAgIHRoaXMudmlzaWJsZU9iai5pbXBvcnRleGNlbHZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShmaWxlKSB7CiAgICAgIHZhciBpbmRleCA9IHRoaXMuZmlsZUxpc3QuaW5kZXhPZihmaWxlKTsKICAgICAgdmFyIG5ld0ZpbGVMaXN0ID0gdGhpcy5maWxlTGlzdC5zbGljZSgpOwogICAgICBuZXdGaWxlTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLmZpbGVMaXN0ID0gbmV3RmlsZUxpc3Q7CiAgICB9LAogICAgdXBsb2FkRXhjZWw6IGZ1bmN0aW9uIHVwbG9hZEV4Y2VsKCkgewogICAgICB3aW5kb3cub3BlbignaHR0cDovL2xvY2FsaG9zdDo4MDgwL2N1c3RvbWVyLnhsc3gnKTsKICAgIH0sCiAgICBiZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIGJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIHRoaXMuZmlsZUxpc3QgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuZmlsZUxpc3QpLCBbZmlsZV0pOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgY2hvb3NlQ29tcGFueTogZnVuY3Rpb24gY2hvb3NlQ29tcGFueShpdGVtKSB7CiAgICAgIHRoaXMuY29tcGFueV9pZCA9IGl0ZW0uaWQ7CiAgICB9LAogICAgaGFuZGxlVXBsb2FkOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZmlsZUxpc3QgPSB0aGlzLmZpbGVMaXN0OwogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkgewogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpOwogICAgICB9KTsKICAgICAgdGhpcy51cGxvYWRpbmcgPSB0cnVlOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2NvbXBhbnknLCB0aGlzLmNvbXBhbnlfaWQpOyAvLyBmb3JtRGF0YS5jb21wYW55ID0gdGhpcy5jb21wYW55X2lkCgogICAgICBjb25zb2xlLmxvZyhmb3JtRGF0YSwgJzk5OTk5OTk5OTk5Jyk7IC8vIOS4iuS8oAoKICAgICAgcmVxd2VzdCh7CiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL3poQ3VzdG9tZXIvdXBsb2FkRXhjZWwnLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSwKICAgICAgICBkYXRhOiBmb3JtRGF0YSwKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKCkgewogICAgICAgICAgX3RoaXMuZmlsZUxpc3QgPSBbXTsKICAgICAgICAgIF90aGlzLnVwbG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S4iuS8oOaIkOWKnycpOwoKICAgICAgICAgIF90aGlzLiRwYXJlbnQudmlzaWJsZU9iai5pbXBvcnRleGNlbHZpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICBfdGhpcy4kcGFyZW50LmdldERhdGEoKTsKICAgICAgICB9LAogICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcigpIHsKICAgICAgICAgIF90aGlzLnVwbG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,8B,CAAA;;AACA;AACAA;AACAC;AACAC,kBADA;AAEAC;AACA;AACAC;AADA;AAGA;AANA,KADA;AASAC;AACAH,iBADA;AAEAC;AACA;AACA;AAJA;AATA,GADA;AAiBAG,MAjBA,kBAiBA;AACA;AACAC;AAAAC;AAAAC;AAAA;AAAAC;AAAAD;AAAA;AAAA,OADA;AAEAE;AAAAH;AAAAC;AAAA;AAAAC;AAAAD;AAAA;AAAA,OAFA;AAGAG,kBAHA;AAIAC,sBAJA;AAKAC,iBALA;AAMAC;AANA;AAQA,GA1BA;AA2BAC;AACAC,gBADA,wBACAC,CADA,EACA;AACA;AACA,KAHA;AAIAC,gBAJA,wBAIAC,IAJA,EAIA;AACA;AACA;AACAC;AACA;AACA,KATA;AAUAC,eAVA,yBAUA;AACAC;AACA,KAZA;AAaAC,gBAbA,wBAaAJ,IAbA,EAaA;AACA;AACA;AACA,KAhBA;AAiBAK,iBAjBA,yBAiBAC,IAjBA,EAiBA;AACA;AACA,KAnBA;AAoBAC,gBApBA,0BAoBA;AAAA;;AACA;AACA;AACAf;AACAgB;AACA,OAFA;AAGA;AACAA,kDAPA,CAQA;;AACAC,2CATA,CAUA;;AACAC;AACAC,2DADA;AAEAC,sBAFA;AAGAC,0BAHA;AAIA3B,sBAJA;AAKA4B;AACA;AACA;;AACA;;AACA;;AACA;AACA,SAXA;AAYAC;AACA;;AACA;AACA;AAfA;AAiBA;AAhDA;AA3BA","names":["props","visibleObj","type","default","importexcelvisible","companyList","data","labelCol","lg","span","sm","wrapperCol","fileList","uploading","company","company_id","methods","handleCancel","e","handleRemove","file","newFileList","uploadExcel","window","beforeUpload","chooseCompany","item","handleUpload","formData","console","reqwest","url","method","processData","success","error"],"sourceRoot":"src/views/owner/information-dialog","sources":["importexcel.vue"],"sourcesContent":["<template>\n  <div>\n    <a-modal title=\"导入业主信息(Excel)到数据库\" width=\"50%\" v-model=\"visibleObj.importexcelvisible\">\n      <a-form-model :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\n        <a-row>\n          <a-col :span=\"8\">\n            <a-form-model-item label=\"所属公司\" :labelCol=\"{span: 10}\" :wrapperCol=\"{span: 14}\">\n              <a-select v-model=\"company\">\n                <a-select-option\n                  :value=\"item.id\"\n                  v-for=\"(item, index) in companyList\"\n                  :key=\"index\"\n                  @click=\"chooseCompany(item)\"\n                >{{ item.companyFullName }}</a-select-option>\n              </a-select>\n            </a-form-model-item>\n          </a-col>\n          <a-col :span=\"8\" offset=\"2\">\n            <a-button class=\"importExcel\" @click=\"uploadExcel\">下载Excel模版</a-button>\n          </a-col>\n        </a-row>\n        <a-row>\n          <a-col :span=\"8\">\n            <a-form-model-item label=\"选择Excel文档\" :labelCol=\"{span: 10}\" :wrapperCol=\"{span: 14}\">\n              <a-upload :fileList=\"fileList\" :remove=\"handleRemove\" :beforeUpload=\"beforeUpload\">\n                <a-button>\n                  <a-icon type=\"upload\" />选择上传文件\n                </a-button>\n              </a-upload>\n            </a-form-model-item>\n          </a-col>\n          <a-col :span=\"3\" offset=\"2\">\n            <a-button\n              type=\"primary\"\n              @click=\"handleUpload\"\n              :disabled=\"fileList.length === 0\"\n              :loading=\"uploading\"\n              style=\"margin-top: 4px;\"\n            >{{ uploading ? '上传中' : '开始上传' }}</a-button>\n          </a-col>\n          <a-col :span=\"6\">\n            <a-button style=\"margin-top: 4px;\" @click=\"handleCancel\">关闭</a-button>\n          </a-col>\n        </a-row>\n      </a-form-model>\n    </a-modal>\n  </div>\n</template>\n\n<script>\nimport reqwest from 'reqwest' // ajax上传插件\nexport default {\n    props: {\n        visibleObj: {\n            type: Object,\n            default: () => {\n                return {\n                    importexcelvisible: false\n                }\n            }\n        },\n        companyList: {\n          type: Array,\n          default: () => {\n                return []\n            }\n        }\n    },\n    data() {\n        return {\n            labelCol: { lg: { span: 6 }, sm: { span: 6 } },\n            wrapperCol: { lg: { span: 18 }, sm: { span: 18 } },\n            fileList: [],\n            uploading: false,\n            company: '',\n            company_id: ''\n        }\n    },\n    methods: {\n        handleCancel(e) {\n            this.visibleObj.importexcelvisible = false\n        },\n        handleRemove(file) {\n            const index = this.fileList.indexOf(file)\n            const newFileList = this.fileList.slice()\n            newFileList.splice(index, 1)\n            this.fileList = newFileList\n        },\n        uploadExcel() {\n          window.open('http://localhost:8080/customer.xlsx')\n        },\n        beforeUpload(file) {\n            this.fileList = [...this.fileList, file]\n            return false\n        },\n        chooseCompany(item) {\n          this.company_id = item.id\n        },\n        handleUpload() {\n            const { fileList } = this\n            const formData = new FormData()\n            fileList.forEach(file => {\n                formData.append('file', file)\n            })\n            this.uploading = true\n            formData.append('company', this.company_id)\n            // formData.company = this.company_id\n            console.log(formData, '99999999999')\n            // 上传\n            reqwest({\n                url: 'http://localhost:8080/zhCustomer/uploadExcel',\n                method: 'post',\n                processData: false,\n                data: formData,\n                success: () => {\n                    this.fileList = []\n                    this.uploading = false\n                    this.$message.success('上传成功')\n                    this.$parent.visibleObj.importexcelvisible = false\n                    this.$parent.getData()\n                },\n                error: () => {\n                    this.uploading = false\n                    this.$message.error('上传失败')\n                }\n            })\n        }\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.importExcel {\n    margin-top: 4px;\n}\n.ant-upload .ant-btn{\n    width: 100%;display: block;\n}\n</style>\n"]}]}