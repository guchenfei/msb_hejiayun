{"remainingRequest":"E:\\ideas-test\\webproject\\node_modules\\babel-loader\\lib\\index.js!E:\\ideas-test\\webproject\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\ideas-test\\webproject\\src\\components\\Dialog.js","dependencies":[{"path":"E:\\ideas-test\\webproject\\src\\components\\Dialog.js","mtime":1587193626000},{"path":"E:\\ideas-test\\webproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655196103443},{"path":"E:\\ideas-test\\webproject\\node_modules\\babel-loader\\lib\\index.js","mtime":1655196104199},{"path":"E:\\ideas-test\\webproject\\node_modules\\eslint-loader\\index.js","mtime":1655196103780}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovaWRlYXMtdGVzdC93ZWJwcm9qZWN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBNb2RhbCBmcm9tICdhbnQtZGVzaWduLXZ1ZS9lcy9tb2RhbCc7CmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoVnVlKSB7CiAgZnVuY3Rpb24gZGlhbG9nKGNvbXBvbmVudCwgY29tcG9uZW50UHJvcHMsIG1vZGFsUHJvcHMpIHsKICAgIHZhciBfdm0gPSB0aGlzOwoKICAgIG1vZGFsUHJvcHMgPSBtb2RhbFByb3BzIHx8IHt9OwoKICAgIGlmICghX3ZtIHx8ICFfdm0uX2lzVnVlKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgZGlhbG9nRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keT5kaXZbdHlwZT1kaWFsb2ddJyk7CgogICAgaWYgKCFkaWFsb2dEaXYpIHsKICAgICAgZGlhbG9nRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGRpYWxvZ0Rpdi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnZGlhbG9nJyk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGlhbG9nRGl2KTsKICAgIH0KCiAgICB2YXIgaGFuZGxlID0gZnVuY3Rpb24gaGFuZGxlKGNoZWNrRnVuY3Rpb24sIGFmdGVySGFuZGVsKSB7CiAgICAgIGlmIChjaGVja0Z1bmN0aW9uIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKICAgICAgICB2YXIgcmVzID0gY2hlY2tGdW5jdGlvbigpOwoKICAgICAgICBpZiAocmVzIGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICAgICAgcmVzLnRoZW4oZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgYyAmJiBhZnRlckhhbmRlbCgpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlcyAmJiBhZnRlckhhbmRlbCgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBjaGVja0Z1bmN0aW9uICYmIGFmdGVySGFuZGVsKCkKICAgICAgICBjaGVja0Z1bmN0aW9uIHx8IGFmdGVySGFuZGVsKCk7CiAgICAgIH0KICAgIH07CgogICAgdmFyIGRpYWxvZ0luc3RhbmNlID0gbmV3IFZ1ZSh7CiAgICAgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZpc2libGU6IHRydWUKICAgICAgICB9OwogICAgICB9LAogICAgICByb3V0ZXI6IF92bS4kcm91dGVyLAogICAgICBzdG9yZTogX3ZtLiRzdG9yZSwKICAgICAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB0aGlzLiRvbignY2xvc2UnLCBmdW5jdGlvbiAodikgewogICAgICAgICAgX3RoaXMuaGFuZGxlQ2xvc2UoKTsKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgbWV0aG9kczogewogICAgICAgIGhhbmRsZUNsb3NlOiBmdW5jdGlvbiBoYW5kbGVDbG9zZSgpIHsKICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICAgIGhhbmRsZSh0aGlzLiRyZWZzLl9jb21wb25lbnQub25DYW5jZWwsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMyLnZpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgIF90aGlzMi4kcmVmcy5fY29tcG9uZW50LiRlbWl0KCdjbG9zZScpOwoKICAgICAgICAgICAgX3RoaXMyLiRyZWZzLl9jb21wb25lbnQuJGVtaXQoJ2NhbmNlbCcpOwoKICAgICAgICAgICAgZGlhbG9nSW5zdGFuY2UuJGRlc3Ryb3koKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlT2s6IGZ1bmN0aW9uIGhhbmRsZU9rKCkgewogICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAgICAgaGFuZGxlKHRoaXMuJHJlZnMuX2NvbXBvbmVudC5vbk9LIHx8IHRoaXMuJHJlZnMuX2NvbXBvbmVudC5vbk9rLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMy52aXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczMuJHJlZnMuX2NvbXBvbmVudC4kZW1pdCgnY2xvc2UnKTsKCiAgICAgICAgICAgIF90aGlzMy4kcmVmcy5fY29tcG9uZW50LiRlbWl0KCdvaycpOwoKICAgICAgICAgICAgZGlhbG9nSW5zdGFuY2UuJGRlc3Ryb3koKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCkgewogICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICB2YXIgbW9kYWxNb2RlbCA9IG1vZGFsUHJvcHMgJiYgbW9kYWxQcm9wcy5tb2RlbDsKCiAgICAgICAgaWYgKG1vZGFsTW9kZWwpIHsKICAgICAgICAgIGRlbGV0ZSBtb2RhbFByb3BzLm1vZGVsOwogICAgICAgIH0KCiAgICAgICAgdmFyIE1vZGFsUHJvcHMgPSBPYmplY3QuYXNzaWduKHt9LCBtb2RhbE1vZGVsICYmIHsKICAgICAgICAgIG1vZGVsOiBtb2RhbE1vZGVsCiAgICAgICAgfSB8fCB7fSwgewogICAgICAgICAgYXR0cnM6IE9iamVjdC5hc3NpZ24oe30sIF9vYmplY3RTcHJlYWQoe30sIG1vZGFsUHJvcHMuYXR0cnMgfHwgbW9kYWxQcm9wcyksIHsKICAgICAgICAgICAgdmlzaWJsZTogdGhpcy52aXNpYmxlCiAgICAgICAgICB9KSwKICAgICAgICAgIG9uOiBPYmplY3QuYXNzaWduKHt9LCBfb2JqZWN0U3ByZWFkKHt9LCBtb2RhbFByb3BzLm9uIHx8IG1vZGFsUHJvcHMpLCB7CiAgICAgICAgICAgIG9rOiBmdW5jdGlvbiBvaygpIHsKICAgICAgICAgICAgICB0aGF0LmhhbmRsZU9rKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICAgICAgICAgIHRoYXQuaGFuZGxlQ2xvc2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KTsKICAgICAgICB2YXIgY29tcG9uZW50TW9kZWwgPSBjb21wb25lbnRQcm9wcyAmJiBjb21wb25lbnRQcm9wcy5tb2RlbDsKCiAgICAgICAgaWYgKGNvbXBvbmVudE1vZGVsKSB7CiAgICAgICAgICBkZWxldGUgY29tcG9uZW50UHJvcHMubW9kZWw7CiAgICAgICAgfQoKICAgICAgICB2YXIgQ29tcG9uZW50UHJvcHMgPSBPYmplY3QuYXNzaWduKHt9LCBjb21wb25lbnRNb2RlbCAmJiB7CiAgICAgICAgICBtb2RlbDogY29tcG9uZW50TW9kZWwKICAgICAgICB9IHx8IHt9LCB7CiAgICAgICAgICByZWY6ICdfY29tcG9uZW50JywKICAgICAgICAgIGF0dHJzOiBPYmplY3QuYXNzaWduKHt9LCBfb2JqZWN0U3ByZWFkKHt9LCBjb21wb25lbnRQcm9wcyAmJiBjb21wb25lbnRQcm9wcy5hdHRycyB8fCBjb21wb25lbnRQcm9wcykpLAogICAgICAgICAgb246IE9iamVjdC5hc3NpZ24oe30sIF9vYmplY3RTcHJlYWQoe30sIGNvbXBvbmVudFByb3BzICYmIGNvbXBvbmVudFByb3BzLm9uIHx8IGNvbXBvbmVudFByb3BzKSkKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gaChNb2RhbCwgTW9kYWxQcm9wcywgW2goY29tcG9uZW50LCBDb21wb25lbnRQcm9wcyldKTsKICAgICAgfQogICAgfSkuJG1vdW50KGRpYWxvZ0Rpdik7CiAgfQoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRkaWFsb2cnLCB7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICBkaWFsb2cuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0KICB9KTsKfSk7"},{"version":3,"sources":["E:/ideas-test/webproject/src/components/Dialog.js"],"names":["Modal","Vue","dialog","component","componentProps","modalProps","_vm","_isVue","dialogDiv","document","querySelector","createElement","setAttribute","body","appendChild","handle","checkFunction","afterHandel","Function","res","Promise","then","c","dialogInstance","data","visible","router","$router","store","$store","mounted","$on","v","handleClose","methods","$refs","_component","onCancel","$emit","$destroy","handleOk","onOK","onOk","render","h","that","modalModel","model","ModalProps","Object","assign","attrs","on","ok","cancel","componentModel","ComponentProps","ref","$mount","defineProperty","prototype","get","apply","arguments"],"mappings":"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","sourcesContent":["import Modal from 'ant-design-vue/es/modal'\r\nexport default Vue => {\r\n    function dialog(component, componentProps, modalProps) {\r\n        const _vm = this\r\n        modalProps = modalProps || {}\r\n        if (!_vm || !_vm._isVue) {\r\n            return\r\n        }\r\n        let dialogDiv = document.querySelector('body>div[type=dialog]')\r\n        if (!dialogDiv) {\r\n            dialogDiv = document.createElement('div')\r\n            dialogDiv.setAttribute('type', 'dialog')\r\n            document.body.appendChild(dialogDiv)\r\n        }\r\n\r\n        const handle = function(checkFunction, afterHandel) {\r\n            if (checkFunction instanceof Function) {\r\n                const res = checkFunction()\r\n                if (res instanceof Promise) {\r\n                    res.then(c => {\r\n                        c && afterHandel()\r\n                    })\r\n                } else {\r\n                    res && afterHandel()\r\n                }\r\n            } else {\r\n                // checkFunction && afterHandel()\r\n                checkFunction || afterHandel()\r\n            }\r\n        }\r\n\r\n        const dialogInstance = new Vue({\r\n            data() {\r\n                return {\r\n                    visible: true\r\n                }\r\n            },\r\n            router: _vm.$router,\r\n            store: _vm.$store,\r\n            mounted() {\r\n                this.$on('close', v => {\r\n                    this.handleClose()\r\n                })\r\n            },\r\n            methods: {\r\n                handleClose() {\r\n                    handle(this.$refs._component.onCancel, () => {\r\n                        this.visible = false\r\n                        this.$refs._component.$emit('close')\r\n                        this.$refs._component.$emit('cancel')\r\n                        dialogInstance.$destroy()\r\n                    })\r\n                },\r\n                handleOk() {\r\n                    handle(this.$refs._component.onOK || this.$refs._component.onOk, () => {\r\n                        this.visible = false\r\n                        this.$refs._component.$emit('close')\r\n                        this.$refs._component.$emit('ok')\r\n                        dialogInstance.$destroy()\r\n                    })\r\n                }\r\n            },\r\n            render: function(h) {\r\n                const that = this\r\n                const modalModel = modalProps && modalProps.model\r\n                if (modalModel) {\r\n                    delete modalProps.model\r\n                }\r\n                const ModalProps = Object.assign({}, (modalModel && { model: modalModel }) || {}, {\r\n                    attrs: Object.assign(\r\n                        {},\r\n                        {\r\n                            ...(modalProps.attrs || modalProps)\r\n                        },\r\n                        {\r\n                            visible: this.visible\r\n                        }\r\n                    ),\r\n                    on: Object.assign(\r\n                        {},\r\n                        {\r\n                            ...(modalProps.on || modalProps)\r\n                        },\r\n                        {\r\n                            ok: () => {\r\n                                that.handleOk()\r\n                            },\r\n                            cancel: () => {\r\n                                that.handleClose()\r\n                            }\r\n                        }\r\n                    )\r\n                })\r\n\r\n                const componentModel = componentProps && componentProps.model\r\n                if (componentModel) {\r\n                    delete componentProps.model\r\n                }\r\n                const ComponentProps = Object.assign({}, (componentModel && { model: componentModel }) || {}, {\r\n                    ref: '_component',\r\n                    attrs: Object.assign(\r\n                        {},\r\n                        {\r\n                            ...((componentProps && componentProps.attrs) || componentProps)\r\n                        }\r\n                    ),\r\n                    on: Object.assign(\r\n                        {},\r\n                        {\r\n                            ...((componentProps && componentProps.on) || componentProps)\r\n                        }\r\n                    )\r\n                })\r\n\r\n                return h(Modal, ModalProps, [h(component, ComponentProps)])\r\n            }\r\n        }).$mount(dialogDiv)\r\n    }\r\n\r\n    Object.defineProperty(Vue.prototype, '$dialog', {\r\n        get: () => {\r\n            return function() {\r\n                dialog.apply(this, arguments)\r\n            }\r\n        }\r\n    })\r\n}\r\n"]}]}